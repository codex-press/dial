@import '_variables.less';

figure {
  width: @textWidth;
  max-width: 100%;
  max-height: 100vh;
  margin: 1rem auto;
}

figure.wide {
  width: (@textWidth + 10rem);
}

figure.wider {
  width: (@textWidth + 20rem);
  height: 600px;
  margin-top: 5em;
}

.text-center p.dek {
  text-align: center;
}

.text-center h1.hed {
  font-size: 3.5em;
  padding: 0.2em;
}

.text-center .folio {
  margin-top: 2em;
  display: inline-block;
  padding-left: 0.5em;
  padding-right: 0.5em;
}

.text-center a {
  color: white;
}

@keyframes dropTextCenter {
  0% {
    opacity: 0;
  }

  100% {
    opacity: 100;
  }
}

.text-center {
  vertical-align: middle;
  animation: 3s ease-out 0s 1 dropTextCenter;
}

@media (max-width: 800px) {
  figure.wider {
    margin: 0rem -4rem 4rem -4rem;
    width: calc(100% + 8rem);
    max-width: initial;
    height: 100vh;
    max-height: 100%; 
  }

   figure.border:after {
    content: "";
    position: absolute;
    height: 90%;
    width: 100%;
    top: -10px;
    left: -10px;
    z-index: -1;
    background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAYAAABWKLW/AAAAGklEQVQYV2NkQAKMIDav4sL/n+/HM4I5MAAARa0EBJHW09wAAAAASUVORK5CYII=);
    //background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAQElEQVQoU2NkIALwKi78z0hIHUjR5/vxjHgVwhSBDMOpEFkRToXoirAqxKYIQyEuRSgK8SmCKySkCKyQGEUghQCTyyXZTfUuEAAAAABJRU5ErkJggg==) repeat;
  }
 
 @keyframes bounce {
  	0%, 20%, 50%, 80%, 100% {
       transform: translateY(0);
    }
  	40% {
       transform: translateY(-30px);
    }
  	60% {
       transform: translateY(-15px);
    }
  }

  figure.wider:after {
    content: '';
    position: absolute;
    bottom: 10px;
    left: 50%;
    margin-left:-20px;
    width: 30px;
    height: 30px;
    animation: bounce 1.5s infinite;
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MTIgNTEyIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0yOTMuNzUxLDQ1NS44NjhjLTIwLjE4MSwyMC4xNzktNTMuMTY1LDE5LjkxMy03My42NzMtMC41OTVsMCwwYy0yMC41MDgtMjAuNTA4LTIwLjc3My01My40OTMtMC41OTQtNzMuNjcyICBsMTg5Ljk5OS0xOTBjMjAuMTc4LTIwLjE3OCw1My4xNjQtMTkuOTEzLDczLjY3MiwwLjU5NWwwLDBjMjAuNTA4LDIwLjUwOSwyMC43NzIsNTMuNDkyLDAuNTk1LDczLjY3MUwyOTMuNzUxLDQ1NS44Njh6Ii8+DQo8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNMjIwLjI0OSw0NTUuODY4YzIwLjE4LDIwLjE3OSw1My4xNjQsMTkuOTEzLDczLjY3Mi0wLjU5NWwwLDBjMjAuNTA5LTIwLjUwOCwyMC43NzQtNTMuNDkzLDAuNTk2LTczLjY3MiAgbC0xOTAtMTkwYy0yMC4xNzgtMjAuMTc4LTUzLjE2NC0xOS45MTMtNzMuNjcxLDAuNTk1bDAsMGMtMjAuNTA4LDIwLjUwOS0yMC43NzIsNTMuNDkyLTAuNTk1LDczLjY3MUwyMjAuMjQ5LDQ1NS44Njh6Ii8+DQo8L3N2Zz4=);
    background-size: contain;
  }

  .text-center {
    padding: 0em 4em;
    margin: auto;
  }

.text-center h1.hed {
    font-size: 3em;
  }
}

@media (max-width: 600px) {
  .text-center h1.hed {
    font-size: 2.5em;
    padding: 0.2em;
    text-align: left;
  }

  .text-center p.dek {
    text-align: left;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }
}

@media (min-width: 800px) {
  .title-content {
    display: none;
  }
  
  figure.border:after {
      content: "";
      position: absolute;
      height: 95%;
      width: 100%;
      top: -10px;
      left: -10px;
      z-index: -1;
      background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAYAAABWKLW/AAAAGklEQVQYV2NkQAKMIDav4sL/n+/HM4I5MAAARa0EBJHW09wAAAAASUVORK5CYII=);
      //background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAQElEQVQoU2NkIALwKi78z0hIHUjR5/vxjHgVwhSBDMOpEFkRToXoirAqxKYIQyEuRSgK8SmCKySkCKyQGEUghQCTyyXZTfUuEAAAAABJRU5ErkJggg==) repeat;
  }
}

@media (min-width: 1000px) {
  .text-center {
    font-size: 1.1rem;}
}

 .border img:after {
    content: "";
    position: absolute;
    height: 100%;
    width: 100%;
    top: -10px;
    left: -10px;
    z-index: -1;
    background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAYAAABWKLW/AAAAGklEQVQYV2NkQAKMIDav4sL/n+/HM4I5MAAARa0EBJHW09wAAAAASUVORK5CYII=);
    //background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAQElEQVQoU2NkIALwKi78z0hIHUjR5/vxjHgVwhSBDMOpEFkRToXoirAqxKYIQyEuRSgK8SmCKySkCKyQGEUghQCTyyXZTfUuEAAAAABJRU5ErkJggg==) repeat;
  }

figcaption {
  color: @captionColor;
  font-family: 'Ubuntu', sans-serif;
  color: #9e9e9e;
  padding-top: 5px;
  padding-bottom: 5px;
  text-transform: uppercase;
  font-size: .6em;
  line-height: 1.3em;
}

figure.full-width,
figure.full-window {
  margin: -0rem -4rem 0 -4rem;
  width: calc(100% + 8rem);
  max-width: initial;
  //scroll-snap-points-y: repeat(100%);
  //scroll-snap-type: proximity;
  //scroll-snap-destination: 100% 0%;
}

figure.full-width:after {
  content: '';
  position: absolute;
  bottom: 10px;
  left: 50%;
  margin-left:-20px;
  width: 30px;
  height: 30px;
  animation: bounce 1.5s 3;
  background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MTIgNTEyIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0yOTMuNzUxLDQ1NS44NjhjLTIwLjE4MSwyMC4xNzktNTMuMTY1LDE5LjkxMy03My42NzMtMC41OTVsMCwwYy0yMC41MDgtMjAuNTA4LTIwLjc3My01My40OTMtMC41OTQtNzMuNjcyICBsMTg5Ljk5OS0xOTBjMjAuMTc4LTIwLjE3OCw1My4xNjQtMTkuOTEzLDczLjY3MiwwLjU5NWwwLDBjMjAuNTA4LDIwLjUwOSwyMC43NzIsNTMuNDkyLDAuNTk1LDczLjY3MUwyOTMuNzUxLDQ1NS44Njh6Ii8+DQo8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNMjIwLjI0OSw0NTUuODY4YzIwLjE4LDIwLjE3OSw1My4xNjQsMTkuOTEzLDczLjY3Mi0wLjU5NWwwLDBjMjAuNTA5LTIwLjUwOCwyMC43NzQtNTMuNDkzLDAuNTk2LTczLjY3MiAgbC0xOTAtMTkwYy0yMC4xNzgtMjAuMTc4LTUzLjE2NC0xOS45MTMtNzMuNjcxLDAuNTk1bDAsMGMtMjAuNTA4LDIwLjUwOS0yMC43NzIsNTMuNDkyLTAuNTk1LDczLjY3MUwyMjAuMjQ5LDQ1NS44Njh6Ii8+DQo8L3N2Zz4=);
  background-size: contain;
}

// at the top of the story it's got no margin
 article > figure.full-window:first-child,
 article > :first-child > figure.full-window:first-child {
   margin-top: auto;
 }

// prevent margin collapse with children
div.left, section.left, div.right, section.left {
  border-top: 1px solid transparent;
}

@media @floatBreak {

  figure.left,
  figure.right {
    width: calc(50% - 1rem);
    clear: both;
    @oneThirdLine: (@lineHeight / 3);
    margin-top: ~'@{oneThirdLine}rem';
  }

  figure.left {
    float: left;
    margin-right: 1rem;
  }

  figure.right {
    float: right;
    margin-left: 1rem;
  }

  figure.left:first-child,
  figure.right:first-child {
    margin-top: 0;
  }

  // so if the text is of to the side, the figure takes up remaining space
  .right figure.left,
  .left figure.right {
    width: calc(100% - @textWidth);
  }
  .right figure.left {
    margin-left: -1rem;
  }
  .left figure.right {
    margin-right: -1rem;
  }

}


// // on very large screens they take up more space
// @media (min-width: 1400px) {

//   // this keeps it half into the center text column
//   figure.left {
//     margin-left: calc(10% - (@textWidth/2));
//   }

//   figure.right {
//     margin-right: calc(10% - (@textWidth/2));
//   }

// }


// positioning [x-cp-overlay]
[x-cp-overlay] {
  .content-bottom {
    display: flex;
    align-items: flex-end;
  }

  .content-bottom-right {
    display: flex;
    align-items: flex-end;
  }

  .content-bottom-center {
    display: flex;
    align-items: flex-end;
  }

  // center vertically
  .content-center {

  }

  .content-center-left {
    display: flex;
    align-items: flex-end;
  }

  .content-center-right {
    display: flex;
    align-items: flex-end;
  }


  // top
  .content-center {
    display: flex;
    align-items: flex-end;
  }

  .content-right {

  }

}


figure .frame {
  p, aside, h1, h2, h3, h4, h5, h6 {
    max-width: initial;
    color: #eee;
  }

  .light-background {
    background: hsla(0, 100%, 100%, .65);
  }

  .dark-background {
    background: hsla(0, 0%, 0%, .65);
  }
}

figure.dark-text {
  &,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    color: #111;
  }
}



html.javascript [x-cp-figure] {

  .top {
    position: absolute;
    top: 0;
  }
  .right {
    position: absolute;
    right: 0;
  }
  .bottom {
    position: absolute;
    bottom: 0;
  }
  .left {
    position: absolute;
    left: 0;
  }

}
