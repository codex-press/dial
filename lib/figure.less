@import '_variables.less';

figure {
  width: @textWidth;
  max-width: 100%;
  max-height: 100vh;
  margin: 1rem auto;
}

figure.wide {
  width: (@textWidth + 10rem);
}

figure.wider {
  width: (@textWidth + 20rem);
  height: 600px;
  margin-top: 5em;
}

.text-center p.dek {
  text-align: center;
}

.text-center h1.hed {
  font-size: 3.5em;
  padding: 0.2em;
}

.text-center .folio {
  margin-top: 1em;
  display: inline-block;
  padding-left: 0.5em;
  padding-right: 0.5em;
}

.text-center a {
  color: white;
}

@keyframes dropTextCenter {
  0% {
    opacity: 0;
  }

  100% {
    opacity: 100;
  }
}

.text-center {
  animation: 3s ease-out 0s 1 dropTextCenter;
}


@media (max-width: 800px) {
figure.wider {
  margin: 0rem -4rem 4rem -4rem;
  width: calc(100% + 8rem);
  max-width: initial;
  height: 100vh;
  max-height: 100%; }

  .text-center {
    padding: 0em 4em;
    margin: auto;
  }

.text-center h1.hed {
    font-size: 3em;
  }

  figure:not(.wider):after {
    content: "";
    position: absolute;
    height: 90%;
    background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAQElEQVQoU2NkIALwKi78z0hIHUjR5/vxjHgVwhSBDMOpEFkRToXoirAqxKYIQyEuRSgK8SmCKySkCKyQGEUghQCTyyXZTfUuEAAAAABJRU5ErkJggg==) repeat;
  }
}

@media (min-width: 1000px) {
  .text-center {
    font-size: 1.1rem;}
}

figure:not(.wider):not(.full-width):after {
  content: "";
  position: absolute;
  height: 90%;
  width: 100%;
  top: -10px;
  left: -10px;
  z-index: -1;
  background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAQElEQVQoU2NkIALwKi78z0hIHUjR5/vxjHgVwhSBDMOpEFkRToXoirAqxKYIQyEuRSgK8SmCKySkCKyQGEUghQCTyyXZTfUuEAAAAABJRU5ErkJggg==) repeat;
}

figcaption {
  color: @captionColor;
  font-family: 'Ubuntu', sans-serif;
  color: #9e9e9e;
  padding-top: 5px;
  padding-bottom: 5px;
  text-transform: uppercase;
  font-size: .6em;
  line-height: 1.3em;
}

figure.full-width,
figure.full-window {
  margin: -0rem -4rem 0 -4rem;
  width: calc(100% + 8rem);
  max-width: initial;
  //scroll-snap-points-y: repeat(100%);
  //scroll-snap-type: proximity;
  //scroll-snap-destination: 100% 0%;
}

// at the top of the story it's got no margin
 article > figure.full-window:first-child,
 article > :first-child > figure.full-window:first-child {
   margin-top: auto;
 }

// prevent margin collapse with children
div.left, section.left, div.right, section.left {
  border-top: 1px solid transparent;
}

@media @floatBreak {

  figure.left,
  figure.right {
    width: calc(50% - 1rem);
    clear: both;
    @oneThirdLine: (@lineHeight / 3);
    margin-top: ~'@{oneThirdLine}rem';
  }

  figure.left {
    float: left;
    margin-right: 1rem;
  }

  figure.right {
    float: right;
    margin-left: 1rem;
  }

  figure.left:first-child,
  figure.right:first-child {
    margin-top: 0;
  }

  // so if the text is of to the side, the figure takes up remaining space
  .right figure.left,
  .left figure.right {
    width: calc(100% - @textWidth);
  }
  .right figure.left {
    margin-left: -1rem;
  }
  .left figure.right {
    margin-right: -1rem;
  }

}


// // on very large screens they take up more space
// @media (min-width: 1400px) {

//   // this keeps it half into the center text column
//   figure.left {
//     margin-left: calc(10% - (@textWidth/2));
//   }

//   figure.right {
//     margin-right: calc(10% - (@textWidth/2));
//   }

// }


// positioning [x-cp-overlay]
[x-cp-overlay] {
  .content-bottom {
    display: flex;
    align-items: flex-end;
  }

  .content-bottom-right {
    display: flex;
    align-items: flex-end;
  }

  .content-bottom-center {
    display: flex;
    align-items: flex-end;
  }

  // center vertically
  .content-center {

  }

  .content-center-left {
    display: flex;
    align-items: flex-end;
  }

  .content-center-right {
    display: flex;
    align-items: flex-end;
  }


  // top
  .content-center {
    display: flex;
    align-items: flex-end;
  }

  .content-right {

  }

}


figure .frame {
  p, aside, h1, h2, h3, h4, h5, h6 {
    max-width: initial;
    color: #eee;
  }

  .light-background {
    background: hsla(0, 100%, 100%, .65);
  }

  .dark-background {
    background: hsla(0, 0%, 0%, .65);
  }
}

figure.dark-text {
  &,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    color: #111;
  }
}



html.javascript [x-cp-figure] {

  .top {
    position: absolute;
    top: 0;
  }
  .right {
    position: absolute;
    right: 0;
  }
  .bottom {
    position: absolute;
    bottom: 0;
  }
  .left {
    position: absolute;
    left: 0;
  }

}
